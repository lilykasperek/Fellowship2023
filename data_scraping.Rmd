---
title: "data_scraping"
output: html_document
date: "2023-06-06"
---

```{r}
##install.packages("tcltk2")
##install.packages("PDE", dependencies = TRUE)

##install.packages("pdftools")
library(tidyverse)
library(pdftools)

## scan for hurtful and insensitive wording

evals_pdf <- pdf_text("STAT113_Fall_2020_1.pdf") 
evals_pdf 

## https://crimebythenumbers.com/scrape-table.html
tab <- pdf_text("STAT113_Fall_2020_1.pdf")
head(tab)
first_page <- strsplit(tab[1], "\n")[[1]]
first_page

first_page_zeroes <- str_replace_all(first_page,
                                     pattern = "-",
                                     replacement = "0")
first_page_zeroes

only_numbers <- str_extract_all(first_page_zeroes, "\\d+")
only_numbers

metadata_df <- tibble::tibble(control_num = only_numbers[[1]][2],
                              year = only_numbers[[2]][1],
                              course = only_numbers[[2]][3],
                              n_evals = only_numbers[[4]][1],
                              n_evals_univ = only_numbers[[8]][1])
metadata_df
```

question 2
```{r}
q2_indeces <- c(7, 9, 10, 11, 12, 14, 16) ## back half of 16
q2 <- only_numbers[q2_indeces]
q2

q2[[7]] <- q2[[7]][4:6]

q2_df <- do.call(rbind.data.frame, q2)
names(q2_df) <- c("n_students", "perc", "univ_perc")
q2_df

responses <- c("strongly agree",
               "agree", 
               "agree somewhat",
               "neutral",
               "disagree somewhat",
               "disagree",
               "disagree strongly")

core_df <- tibble::tibble(responses = responses,
                          q2_df) |>
  mutate(question = "Q2")
core_df
```


